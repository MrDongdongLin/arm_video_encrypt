#ifndef DIALOG_H
#define DIALOG_H

#include <QDialog>
#include <QLabel>
#include <QPushButton>
#include <QLineEdit>

class Dialog : public QDialog
{
    Q_OBJECT

public:
    Dialog(QWidget *parent = 0);
    ~Dialog();

private:
    QLabel *m_image_path;
    QLabel *m_key_info;
    QLabel *m_label_plain_image;
    QLabel *m_label_cipher_image;
    QPushButton *m_button_open_image;
    QPushButton *m_button_encrypt_image;
    QPushButton *m_button_decrypt_image;

    bool is_readImg = false;
    bool is_encrypt = false;

    int table[65536];
    const int a11 = 5990537,  a12 = 9868413,  a13 = 226236,  a14 = 4794846,  a15 =  22802340,  a16 = 143956428,  a17 = 24265311,  a18 = 234878586,
              a21 = 103377,   a22 = 170555,   a23 =3300 ,    a24 = 72240,    a25 = 345054,     a26 = 2207175,    a27 = 389517,    a28 = 3597285,
              a31 = 9064191,  a32 = 14931951, a33 = 341837,  a34 = 7246707,  a35 = 34463589,   a36 = 217599315,  a37 = 36692373,  a38 = 355030845,
              a41 = 4251336,  a42 = 7002429,  a43 = 162735,  a44 = 3440882,  a45 = 16357935,   a46 = 103167336,  a47 = 17326695,  a48 = 168341529,
              a51 = 1743033,  a52 =2870931,   a53 = 66858,   a54 = 1412607,  a55 = 6715337,    a56 = 42346893,   a57 = 7108446,   a58 = 69099612,
              a61 = 6081,     a62 = 10086,    a63 = 195,     a64 = 2703,     a65 = 13386,      a66 = 88019,      a67 = 16818,     a68 = 143121,
              a71 = 15774 ,   a72 = 25926,    a73 = 939,     a74 = 16023,    a75 = 76080,      a76 = 467016,     a77 = 70400,     a78 = 763779,
              a81 = 23712,    a82 = 38973,    a83 = 1446,    a84 = 24249,    a85 = 115179,     a86 = 706044,     a87 = 105780,    a88 = 1154831;
    const double  A11 =  0.1757,   A12 = -0.3643,    A13 = 0.0257,   A14 = -0.3943,    A15 = 0.4457,   A16 = -0.2143,    A17 = 0.2457,   A18 = 0.0257,
                  A21 = -0.2986,   A22 = -0.2186,    A23 = 0.0914,   A24 = -0.3286,    A25 = 0.5114,   A26 = -0.1486,    A27 = 0.3114,   A28 = 0.0914,
                  A31 = -0.1057,   A32 = -0.5657,    A33 = 0.1843,   A34 = -0.1557,    A35 = 0.4743,   A36 = -0.1857,    A37 = 0.2743,   A38 = 0.0543,
                  A41 = -0.0457,   A42 = -0.5057,    A43 = -0.0957,  A44 = -0.1757,    A45 = 0.5343,   A46 = -0.1257,    A47 = 0.3343,   A48 = 0.1143,
                  A51 = -0.0800,   A52 = -0.5400,    A53 = 0.0800,   A54 = -0.3400,    A55 = 0.3300,   A56 =  0.1700,    A57 = 0.3000,   A58 = 0.0800,
                  A61 =  0.0143,   A62 = -0.4457,    A63 = 0.1743,   A64 = -0.2457,    A65 = 0.2643,   A66 = -0.2357,    A67 = 0.3943,   A68 = 0.1743,
                  A71 = -0.0457,   A72 = -0.5057,    A73 = 0.1143,   A74 = -0.3057,    A75 = 0.5343,   A76 = -0.1257,    A77 = 0.1443,   A78 = 0.2243,
                  A81 = -0.0143,   A82 = -0.4743,    A83 = 0.1457,   A84 = -0.2743,    A85 = 0.5657,   A86 = -0.0943,    A87 = 0.2557,   A88 = -0.0443;
    float X1,X2,X3,X4,X5,X6,X7,X8;
    const int B1=40000 , B2=50000 , B3 = 30000,
              E1=1000000000,E2=1200000000,E3=750000000;

    void EncryptCatInit();

private slots:
    void openImage();
    void encryptImage();
    void decryptImage();
};

#endif // DIALOG_H
